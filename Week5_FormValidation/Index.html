<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>首頁</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <style>
    .badge.badge-pill.circle-badge {
      font-size: 25%;
      border-radius: 50%;
      padding-right: .2em;
      padding-left: .2em;
    }

    .is-invalid {
      color: red;
    }
  </style>
</head>

<body>
  <div id="app" class="container mt-3">
    <nav class="navbar navbar-light bg-light">
      <span class="navbar-brand mb-0 h1">Navbar</span>
      <span>
        <i class="fas fa-shopping-cart"></i>
        <span class="badge badge-pill badge-primary">{{itemsInCart}}</span>
      </span>
    </nav>
    <div class="row">
      <div v-for="product in products" class="col-sm-6 col-md-4 pb-4">
        <div class="card">
          <img :src="product.imageUrl[0]" class="card-img-top" :alt="product.title">
          <div class="card-body">
            <h5 class="card-title text-truncate">{{ product.title }}</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{ product.category }}</h6>
            <p class="card-text">{{ product.content }}</p>
            <span class="text-success font-weight-bolder" style="font-size: 1.2rem;">$ {{ product.price }}</span>
            <span class="text-black-50" style="text-decoration:line-through; font-size: 0.8rem;">$
              {{ product.origin_price }}</span>
          </div>
          <div class="card-footer text-muted">
            <button @click="addProduct(product)" type="button" class="btn btn-outline-primary">加入購物車</button>
          </div>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <h5 class="card-title">購物清單</h5>
          <button @click="emptyCart" type="button" class="btn btn-sm btn-outline-primary">清空購物車</button>
        </div>
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">品名</th>
              <th scope="col">數量</th>
              <th scope="col">單價</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="item in shoppingCart">
              <td>{{ item.title }}</td>
              <td>{{ item.count }}</td>
              <td>{{ item.price }}</td>
            </tr>
            <tr>
              <td></td>
              <td>總價</td>
              <td class="text-success font-weight-bolder">${{ totalPrice }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <validation-observer v-slot="{ invalid }">
      <form @submit.prevent="">
        <validation-provider rules="required" class="form-group" tag="div" v-slot="{ errors, classes, passed }">
          <label for="username">收件人</label>
          <input id="username" type="text" name="username" v-model="username" class="form-control" :class="classes">
          <span class="invalid-feedback">{{ errors[0] }}</span>
        </validation-provider>
        <validation-provider rules="required|email" class="form-group" tag="div" v-slot="{ errors, classes, passed }">
          <label for="email">Email</label>
          <input id="email" type="email" name="email" v-model="email" class="form-control" :class="classes">
          <span class="invalid-feedback">{{ errors[0] }}</span>
        </validation-provider>
        <validation-provider rules="required" class="form-group" tag="div" v-slot="{ errors, classes, passed }">
          <label for="phone">電話</label>
          <input id="phone" type="tel" name="phone" v-model="phone" class="form-control" :class="classes">
          <span class="invalid-feedback">{{ errors[0] }}</span>
        </validation-provider>
        <validation-provider rules="required" class="form-group" tag="div" v-slot="{ errors, classes, passed }">
          <label for="address">收件地址</label>
          <input id="address" type="text" name="address" v-model="address" class="form-control" :class="classes">
          <span class="invalid-feedback">{{ errors[0] }}</span>
        </validation-provider>
        <validation-provider rules="required" class="form-group" tag="div" v-slot="{ errors, classes, passed }">
          <label for="pay">付款方式</label>
          <select id="pay" class="custom-select">
            <option selected>請選擇</option>
            <option value="1">ATM</option>
            <option value="2">信用卡</option>
            <option value="3">Line Pay</option>
          </select>
          <span class="invalid-feedback">{{ errors[0] }}</span>
        </validation-provider>
        <div class="form-group">
          <label for="message">留言</label>
          <textarea v-model="message" class="form-control" id="message" rows="3"></textarea>
        </div>
        <!-- 送出表單使用 submit 的方法，如果驗證未通過則 disabled 該按鈕 -->
        <button type="submit" class="btn btn-primary" :disabled="invalid">送出表單</button>
      </form>
    </validation-observer>
  </div>
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vee-validate/3.3.0/vee-validate.full.min.js"></script>

  <script defer src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"
    integrity="sha384-3Nqiqht3ZZEO8FKj7GR1upiI385J92VwWNLj+FqHxtLYxd9l+WYpeqSOrLh0T12c" crossorigin="anonymous">
  </script>
  <script type="module" src="js/index.js"></script>
  <!-- For old browser -->
  <script nomodule src="js/index.js"></script>

</body>

</html>